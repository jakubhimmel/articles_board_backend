(this["webpackJsonpreact-auth-client-done-v2"]=this["webpackJsonpreact-auth-client-done-v2"]||[]).push([[0],{112:function(e,t,a){e.exports=a(274)},274:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(109),c=a.n(l),i=a(1),o=a(2),s=a(4),u=a(3),m=a(5),p=a(15),h=(a(60),a(18)),d=a(6),g=a(24),v=a.n(g),b=new(function(){function e(){Object(i.a)(this,e),this.auth=v.a.create({baseURL:"https://article-board.herokuapp.com",withCredentials:!0})}return Object(o.a)(e,[{key:"signup",value:function(e){var t=e.username,a=e.password;return this.auth.post("/auth/signup",{username:t,password:a}).then((function(e){return e.data}))}},{key:"login",value:function(e){var t=e.username,a=e.password;return this.auth.post("/auth/login",{username:t,password:a}).then((function(e){return e.data}))}},{key:"logout",value:function(){return this.auth.post("/auth/logout",{}).then((function(e){return e.data}))}},{key:"me",value:function(){return this.auth.get("/auth/me").then((function(e){return e.data}))}},{key:"getUser",value:function(){return this.auth.get("/users").then((function(e){return console.log(e),e.data}))}}]),e}()),E=r.a.createContext(),f=E.Consumer,y=E.Provider,j=function(e){return function(t){function a(){return Object(i.a)(this,a),Object(s.a)(this,Object(u.a)(a).apply(this,arguments))}return Object(m.a)(a,t),Object(o.a)(a,[{key:"render",value:function(){var t=this;return r.a.createElement(f,null,(function(a){var n=a.login,l=a.signup,c=a.user,i=a.logout,o=a.isLoggedin,s=a.isLoading;return r.a.createElement(e,Object.assign({login:n,signup:l,user:c,logout:i,isLoggedin:o,isLoading:s},t.props))}))}}]),a}(r.a.Component)},O=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={isLoggedin:!1,user:null,isLoading:!0},a.signup=function(e){var t=e.username,n=e.password;b.signup({username:t,password:n}).then((function(e){return a.setState({isLoggedin:!0,user:e})})).catch((function(e){return console.log(e)}))},a.login=function(e){var t=e.username,n=e.password;b.login({username:t,password:n}).then((function(e){return a.setState({isLoggedin:!0,user:e})})).catch((function(e){return console.log(e)}))},a.logout=function(){b.logout().then((function(){return a.setState({isLoggedin:!1,user:null})})).catch((function(e){return console.log(e)}))},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;b.me().then((function(t){return e.setState({isLoggedin:!0,user:t,isLoading:!1})})).catch((function(t){return e.setState({isLoggedin:!1,user:null,isLoading:!1})}))}},{key:"render",value:function(){var e=this.state,t=e.isLoading,a=e.isLoggedin,n=e.user,l=this.login,c=this.logout,i=this.signup;return r.a.createElement(y,{value:{isLoading:t,isLoggedin:a,user:n,login:l,logout:c,signup:i}},this.props.children)}}]),t}(r.a.Component),C=j(function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={username:"",password:"",email:""},a.handleFormSubmit=function(e){e.preventDefault();var t=a.state,n=t.username,r=t.password,l=t.email;a.props.signup({username:n,password:r,email:l})},a.handleChange=function(e){var t=e.target,n=t.name,r=t.value;a.setState(Object(h.a)({},n,r))},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.state,t=e.username,a=e.password,n=e.email;return r.a.createElement("div",null,r.a.createElement("h1",null,"Sign Up"),r.a.createElement("form",{onSubmit:this.handleFormSubmit},r.a.createElement("label",null,"Username:"),r.a.createElement("input",{type:"text",name:"username",value:t,onChange:this.handleChange}),r.a.createElement("label",null,"Email:"),r.a.createElement("input",{type:"email",name:"email",value:n,onChange:this.handleChange}),r.a.createElement("label",null,"Password:"),r.a.createElement("input",{type:"password",name:"password",value:a,onChange:this.handleChange}),r.a.createElement("input",{type:"submit",value:"Signup"})),r.a.createElement("p",null,"Already have account?"),r.a.createElement(d.b,{to:"/auth/login"}," Login"))}}]),t}(n.Component)),w=j(function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={username:"",password:""},a.handleFormSubmit=function(e){e.preventDefault();var t=a.state,n={username:t.username,password:t.password};a.props.login(n)},a.handleChange=function(e){var t=e.target,n=t.name,r=t.value;a.setState(Object(h.a)({},n,r))},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.state,t=e.username,a=e.password;return r.a.createElement("div",null,r.a.createElement("h1",null,"Login"),r.a.createElement("form",{onSubmit:this.handleFormSubmit},r.a.createElement("label",null,"Username:"),r.a.createElement("input",{type:"text",name:"username",value:t,onChange:this.handleChange}),r.a.createElement("label",null,"Password:"),r.a.createElement("input",{type:"password",name:"password",value:a,onChange:this.handleChange}),r.a.createElement("input",{type:"submit",value:"Login"})))}}]),t}(n.Component)),N=j(function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props,t=e.user,a=e.logout,n=e.isLoggedin;return r.a.createElement("div",null,r.a.createElement("div",{className:"nav-bar"},n?r.a.createElement("div",{className:"navbar"},r.a.createElement("div",{className:"navbar-menu"},r.a.createElement(d.b,{to:"/homepage"},r.a.createElement("h3",null,"write.it")),r.a.createElement(d.b,{to:"/homepage"},r.a.createElement("p",null,"Home")),r.a.createElement(d.b,{to:"/profile"},r.a.createElement("p",null,"Profile"))),r.a.createElement("div",{className:"user-info"},r.a.createElement("div",{className:"left"},r.a.createElement("img",{src:"https://c7.uihere.com/icons/629/613/248/user-avatar-0ac331edcf7e5061afc12cca37be2489.png"}),r.a.createElement(d.b,{to:"/profile"},r.a.createElement("p",null,t.username))),r.a.createElement("p",{onClick:a},"Logout"))):r.a.createElement("div",{className:"navbar"},r.a.createElement("div",{className:"navbar-menu"},r.a.createElement("h3",null,"write.it"),r.a.createElement(d.b,{to:"/homepage"},r.a.createElement("p",null,"Home")),r.a.createElement(d.b,{to:"/profile"},r.a.createElement("p",null,"Profile"))),r.a.createElement("div",{className:"login"},r.a.createElement(d.b,{to:"/auth/login"},r.a.createElement("p",null,"Login")),r.a.createElement(d.b,{to:"/auth/signup"},r.a.createElement("p",null,"Signup")),r.a.createElement("br",null)))))}}]),t}(n.Component));function S(){return r.a.createElement("div",{className:"topic-list"},["future","politics","technology","health","zero-waste","culture","food","design"].map((function(e){return r.a.createElement("button",{className:"topic-button",key:e},r.a.createElement(d.b,{className:"topics-button",to:"/articles/topics/".concat(e)},"# ",e))})))}var x=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={searchTerm:""},a.handleChange=function(e){var t=e.target.value;console.log("Res:",t),a.setState({searchTerm:t})},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return console.log("Render:",this.state.searchTerm),r.a.createElement("div",{className:"search-bar"},r.a.createElement("form",null,r.a.createElement("div",{className:"form"},r.a.createElement("input",{className:"search-box",type:"text",name:"search-query",onChange:this.handleChange}),r.a.createElement(d.b,{className:"searchButton",to:"/articles/by-name/".concat(this.state.searchTerm)},"Search"))))}}]),t}(n.Component),k=Object(p.g)(x),L=function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"homepage"},r.a.createElement("h1",null,"write.it"),r.a.createElement(k,null),r.a.createElement(S,null))}}]),t}(n.Component),D=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={currentUserName:"",currentUserArticles:"",currentUserComments:"",currentUserFavorite:"",currentUserFollowing:""},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;b.me().then((function(t){var a=t.username,n=t.articles,r=t.comments,l=t.favorite,c=t.following;e.setState({currentUserName:a}),e.setState({currentUserArticles:n}),e.setState({currentUserComments:r}),e.setState({currentUserFavorite:l}),e.setState({currentUserFollowing:c})})).catch((function(e){}))}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"Settings page "))}}]),t}(n.Component),U=a(38);var A=j((function(e){var t=e.component,a=e.isLoggedin,n=e.isLoading,l=Object(U.a)(e,["component","isLoggedin","isLoading"]);return n?r.a.createElement("h1",null,"Loading"):r.a.createElement(p.b,Object.assign({},l,{render:function(e){return a?r.a.createElement(p.a,{to:"/homepage"}):r.a.createElement(t,e)}}))}));var F=j((function(e){var t=e.component,a=e.isLoggedin,n=e.isLoading,l=Object(U.a)(e,["component","isLoggedin","isLoading"]);return n?r.a.createElement("h1",null,"Loading"):r.a.createElement(p.b,Object.assign({},l,{render:function(e){return a?r.a.createElement(t,e):r.a.createElement(p.a,{to:"/auth/login"})}}))})),T=new(function(){function e(){Object(i.a)(this,e),this.article=v.a.create({baseURL:"https://article-board.herokuapp.com/articles",withCredentials:!0})}return Object(o.a)(e,[{key:"articleByTopic",value:function(e){return this.article.get("/topics/".concat(e)).then((function(e){return e.data}))}},{key:"articleDetailById",value:function(e){return this.article.get("/".concat(e)).then((function(e){return e.data}))}},{key:"articleByName",value:function(e){return this.article.get("/by-name/".concat(e)).then((function(e){return e.data}))}},{key:"createNewArticle",value:function(e){return this.article.post("/create",e).then((function(e){return e.data}))}},{key:"updateScore",value:function(e,t){return this.article.put("/".concat(e,"/vote"),{newScore:t}).then((function(e){return e.data}))}}]),e}()),P=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={articleList:[]},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params,a=t.name,n=t.topic;console.log("article list",this.props),n?T.articleByTopic(n).then((function(t){console.log("article-list",t),e.setState({articleList:t.articles})})):a&&T.articleByName(a).then((function(t){console.log("article-list",t),e.setState({articleList:t})}))}},{key:"render",value:function(){return this.state.articleList.map((function(e){console.log(e);var t=e.created_at.slice(8,10);if(12==e.created_at.slice(5,7))var a="december";return r.a.createElement(d.b,{to:"/articles/".concat(e._id)},r.a.createElement("div",{className:"article-preview",key:e._id},r.a.createElement("div",{className:"preview-pic"},r.a.createElement("img",{className:"list-pic",src:e.image,alt:"article header"})),r.a.createElement("div",{className:"pic-info"},r.a.createElement("h3",null," ",e.title," "),r.a.createElement("p",null," ",e.description," "),r.a.createElement("p",null,t+" "+a+" "+e.created_at.slice(0,4)))))}))}}]),t}(n.Component),B=new(function(){function e(){Object(i.a)(this,e),this.comment=v.a.create({baseURL:"https://article-board.herokuapp.com/comments",withCredentials:!0})}return Object(o.a)(e,[{key:"createNewComment",value:function(e,t){return this.comment.post("/".concat(e,"/create"),t).then((function(e){return console.log("service body and ID",e),e.data}))}}]),e}()),I=function(e){return r.a.createElement("div",{className:"comment-section"},r.a.createElement("p",null,"Comments:"),r.a.createElement("form",{onSubmit:e.handleFormSubmit},r.a.createElement("input",{className:"textarea",type:"text",name:"text",value:e.text,onChange:e.handleChange}),r.a.createElement("input",{className:"create-article-button",type:"submit",value:"Post"})))};function _(e){return r.a.createElement("div",null,e.comments?e.comments.map((function(e){return console.log("response ",e),r.a.createElement("div",{className:"comments"},r.a.createElement("p",{className:"title"},e.ownerName),r.a.createElement("p",{className:"text"},e.text))})):null)}var M=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={title:"",text:"",comments:[]},a.handleFormSubmit=function(e){e.preventDefault();var t=a.state,n=t.title,r=t.text,l=a.props.articleId._id,c={title:n,text:r};B.createNewComment(l,c).then((function(e){a.props.updateState(),console.log(e)}))},a.handleChange=function(e){var t=e.target,n=t.name,r=t.value;a.setState(Object(h.a)({},n,r))},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidUpdate",value:function(){}},{key:"render",value:function(){return console.log("S T A T E",this.props.comments),r.a.createElement("div",null,r.a.createElement(I,{handleChange:this.handleChange,handleFormSubmit:this.handleFormSubmit,title:this.state.title,text:this.state.text}),r.a.createElement(_,{comments:this.props.comments}))}}]),t}(n.Component),H=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={articleDetail:{}},a.scoreHandler=function(e){var t=a.props.match.params.id,n=a.state.articleDetail.score;n+=e,T.updateScore(t,n).then((function(e){a.setState({articleDetail:e})}))},a.updateState=function(){var e=a.props.match.params.id;T.articleDetailById(e).then((function(e){a.setState({articleDetail:e})}))},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.updateState()}},{key:"render",value:function(){var e=this;console.log(this.state.articleDetail),console.log("mz props",this.props);var t=this.state.articleDetail.created_at,a=String(t),n=a.slice(0,4),l=a.slice(5,7),c=a.slice(8,10);if(console.log(l),12==l)var i="december";var o=c+" "+i+" "+n;return console.log("DATE",this.state.articleDetail),r.a.createElement("div",null,r.a.createElement("div",{className:"article-top"},r.a.createElement("h1",null," ",this.state.articleDetail.title," "),r.a.createElement("p",{className:"article-description"}," ",this.state.articleDetail.description," "),r.a.createElement("p",null," ",o," "),r.a.createElement("img",{src:this.state.articleDetail.image,alt:"articles header"}),r.a.createElement("p",{className:"text"}," ",this.state.articleDetail.text," ")),r.a.createElement("div",{className:"article-score"},r.a.createElement("p",null,this.state.articleDetail.score),r.a.createElement("div",{className:"buttons"},r.a.createElement("button",{onClick:function(){e.scoreHandler(1)}},"Up vote"),r.a.createElement("button",{onClick:function(){e.scoreHandler(-1)}},"Down vote"),r.a.createElement("button",null,"Add to favorites"))),r.a.createElement(M,{comments:this.state.articleDetail.comments,articleId:this.state.articleDetail,updateState:this.updateState}))}}]),t}(n.Component),R=j(function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={currentUserName:"",currentUserArticles:""},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){console.log(this.props);return r.a.createElement("div",null,this.props.user?r.a.createElement("div",null,r.a.createElement("h1",null," ",this.props.user.username," "),r.a.createElement("div",{className:"profile-page-buttons"},r.a.createElement(d.b,{to:"./profile/settings"},r.a.createElement("button",null,"Settings")),r.a.createElement(d.b,{to:"./profile/create-article"},r.a.createElement("button",null,"Write new article"))),r.a.createElement("div",null,this.props.user.articles.map((function(e){return r.a.createElement(d.b,{to:"/articles/".concat(e._id)},r.a.createElement("div",{className:"article-preview"},r.a.createElement("div",{className:"profile-preview-pic"},r.a.createElement("img",{className:"",src:e.image})),r.a.createElement("div",{className:"profile-preview-pic"},r.a.createElement("p",null," ",e.title," "),r.a.createElement("p",null," ",e.description," "),r.a.createElement("p",null," ",e.score," "),r.a.createElement("p",null," ",e.topic," "))))})))):null)}}]),t}(n.Component)),W=(a(138),function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={title:"",topic:"",description:"",image:"",text:"",errorMessage:""},a.handleFormSubmit=function(e){if(""===a.state.title||""===a.state.topic||""===a.state.description||""===a.state.text)a.state.errorMessage="something",e.preventDefault();else{e.preventDefault();var t=a.state,n=t.title,r=t.topic,l={title:n,description:t.description,topic:r,image:t.image,text:t.text};T.createNewArticle(l),a.props.history.push("/profile")}},a.handleChange=function(e){var t=e.target,n=t.name,r=t.value;a.setState(Object(h.a)({},n,r))},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.state,t=e.title,a=e.description,n=e.topic,l=e.image,c=e.text;return r.a.createElement("div",null,this.state.errorMessage?r.a.createElement("div",null,r.a.createElement("h1",null,"Write new article"),r.a.createElement("form",{onSubmit:this.handleFormSubmit}),r.a.createElement("div",{className:"new-article-form"},r.a.createElement("label",null,"Title:"),r.a.createElement("input",{type:"text",name:"title",value:t,onChange:this.handleChange}),r.a.createElement("label",null,"Topic:"),r.a.createElement("input",{type:"text",name:"topic",value:n,onChange:this.handleChange}),r.a.createElement("label",null,"Description:"),r.a.createElement("input",{type:"text",name:"description",value:a,onChange:this.handleChange}),r.a.createElement("label",null,"Image:"),r.a.createElement("input",{type:"text",name:"image",placeholder:"provide an url of the image",value:l,onChange:this.handleChange}),r.a.createElement("label",null,"Text:"),r.a.createElement("div",{className:"create-text"},r.a.createElement("input",{type:"textarea",name:"text",value:c,onChange:this.handleChange})),r.a.createElement("input",{class:"button",type:"submit",value:"Post"})),r.a.createElement("p",null,"Please provide all information")):r.a.createElement("div",null,r.a.createElement("h1",null,"Write new article"),r.a.createElement("form",{onSubmit:this.handleFormSubmit},r.a.createElement("div",{className:"new-article-form"},r.a.createElement("label",null,"Title:"),r.a.createElement("input",{type:"text",name:"title",value:t,onChange:this.handleChange}),r.a.createElement("label",null,"Topic:"),r.a.createElement("input",{type:"text",name:"topic",value:n,onChange:this.handleChange}),r.a.createElement("label",null,"Description:"),r.a.createElement("input",{type:"text",name:"description",value:a,onChange:this.handleChange}),r.a.createElement("label",null,"Image:"),r.a.createElement("input",{type:"text",name:"image",placeholder:"provide an url of the image",value:l,onChange:this.handleChange}),r.a.createElement("label",null,"Text:"),r.a.createElement("div",{className:"create-text"},r.a.createElement("input",{type:"textarea",name:"text",value:c,onChange:this.handleChange})),r.a.createElement("input",{class:"button",type:"submit",value:"Post"})))))}}]),t}(n.Component)),z=function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(N,null),r.a.createElement(p.d,null,r.a.createElement(p.b,{exact:!0,path:"/homepage",component:L}),r.a.createElement(p.b,{exact:!0,path:"/articles/topics/:topic",component:P}),r.a.createElement(p.b,{exact:!0,path:"/articles/by-name/:name",component:P}),r.a.createElement(p.b,{exact:!0,path:"/articles/:id",component:H}),r.a.createElement(p.b,{exact:!0,path:"/profile",component:R}),r.a.createElement(F,{exact:!0,path:"/profile/settings",component:D}),r.a.createElement(F,{exact:!0,path:"/profile/create-article",component:W}),r.a.createElement(A,{exact:!0,path:"/auth/signup",component:C}),r.a.createElement(A,{exact:!0,path:"/auth/login",component:w})))}}]),t}(n.Component);c.a.render(r.a.createElement(d.a,null,r.a.createElement(O,null,r.a.createElement(z,null))),document.getElementById("root"))},60:function(e,t,a){}},[[112,1,2]]]);
//# sourceMappingURL=main.0336d3cc.chunk.js.map